repos:
  # ---------------------------------------------------------------
  # 1. Standard Hygiene (Keeps code clean)
  # ---------------------------------------------------------------
  - repo: https://github.com/pre-commit/pre-commit-hooks
    rev: v4.5.0
    hooks:
      - id: trailing-whitespace        # Removes useless spaces
      - id: end-of-file-fixer          # Adds missing newlines at end of files
      - id: check-yaml                 # Checks if YAML files are valid
      - id: check-added-large-files    # Prevents committing huge files
      - id: detect-private-key         # ðŸš¨ BLOCKS Private Keys (SSH)
      - id: detect-aws-credentials     # ðŸš¨ BLOCKS AWS Secrets
        args: [--allow-missing-credentials]

  # ---------------------------------------------------------------
  # 2. Dockerfile Check (Hadolint)
  # ---------------------------------------------------------------
  # Checks for Docker best practices.
  - repo: https://github.com/hadolint/hadolint
    rev: v2.12.0
    hooks:
      - id: hadolint

  # ---------------------------------------------------------------
  # 3. Security Scan (Trivy)
  # ---------------------------------------------------------------
  # Only fails on CRITICAL issues so it doesn't block your work.
  - repo: local
    hooks:
      - id: trivy
        name: Trivy Security Scan
        # Scans for secrets and vulnerabilities (Critical only)
        entry: trivy fs . --scanners secret,vuln --severity CRITICAL --exit-code 1
        language: system
        pass_filenames: false
